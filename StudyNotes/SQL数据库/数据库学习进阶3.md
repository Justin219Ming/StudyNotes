## 锁
### 全局锁
对整个数据库实例加锁，加锁后处于**只读**状态，常用于**全库的逻辑备份**
```sql
-- 全局锁
flush table with read lock;

-- 数据备份 需要在命令行中执行，而不是mysql中
mysqldump -uroot -p123456 数据库名>备份的位置文件.sql

-- 解锁
unlock tables;
```

### 表级锁
####  表锁
- 表共享读锁(read lock)
    **任何人** 可读但不可以修改
- 表独占写锁(write lock)
    **本人**可读可修改，**其他人**不能读也不能修改

```sql
-- 加锁
lock tables 表名 read/write;

-- 解锁 
unlock tables;
```

#### 元数据锁
为了避免DML与DDL冲突，保证读写的正确性
![](./截图文件夹/屏幕截图%202023-07-21%20112223.png)

*互斥状态就是不能并发执行
，兼容状态就是可以并发*

#### 意向锁
- 意向共享锁：与表锁(read)兼容，与表锁(write)互斥
- 意向排他锁: 与表锁(read)和表锁(write)都互斥。

**意向锁之间不会互斥**
